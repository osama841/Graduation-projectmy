<UserControl x:Class="Apps.AdminPanel.Views.DashboardHomeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:components="clr-namespace:Apps.AdminPanel.Components"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             FlowDirection="RightToLeft"
             Background="{StaticResource AppBackground}"
             d:DesignHeight="700" d:DesignWidth="900">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- العنوان -->
            <RowDefinition Height="Auto"/>
            <!-- البطاقات العلوية -->
            <RowDefinition Height="*"/>
            <!-- المخططات -->
            <RowDefinition Height="Auto"/>
            <!-- النشاطات الأخيرة -->
        </Grid.RowDefinitions>

        <!-- العنوان الرئيسي -->
        <TextBlock Text="لوحة التحكم الرئيسية" 
                   Foreground="{StaticResource TextPrimary}" 
                   FontSize="26" FontWeight="SemiBold" 
                   HorizontalAlignment="Right" Margin="0,0,0,20"/>

        <!-- قسم البطاقات العلوية (KPIs) -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Stretch" Margin="0,0,0,20">
            <!-- 
                تصحيح الخطأ:
                تم استبدال {StaticResource StatusReadyGreen} بـ #00E676
                و {StaticResource StatusUrgentRed} بـ #FF5252
                و {StaticResource AccentColor} بـ #007ACC (اختياري، لكن للضمان)
            -->
            <components:InfoCard Title="حالة النظام" Value="ممتاز" Icon="CheckCircle" AccentColor="#00E676" Margin="5,0"/>
            <components:InfoCard Title="التنبيهات الأمنية" Value="3" Icon="AlertCircle" AccentColor="#FF5252" Margin="10,0"/>
            <components:InfoCard Title="المستخدمين النشطين" Value="85" Icon="AccountMultiple" AccentColor="#007ACC" Margin="10,0"/>
            <components:InfoCard Title="الملفات المشفرة" Value="1,250" Icon="FileLock" AccentColor="#007ACC" Margin="10,0"/>
        </StackPanel>

        <!-- قسم المخططات البيانية -->
        <Grid Grid.Row="2" Margin="0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <!-- المخطط الخطي يأخذ مساحة أكبر -->
                <ColumnDefinition Width="1.2*"/>
            </Grid.ColumnDefinitions>

            <!-- البطاقة الأولى: نشاط التشفير -->
            <Border Grid.Column="0" 
                    Background="{StaticResource PanelBackground}" 
                    BorderBrush="{StaticResource BorderColor}" 
                    BorderThickness="1" 
                    CornerRadius="4" 
                    Margin="5">

                <Grid Margin="15">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="نشاط التشفير (آخر 7 أيام)" 
                               Foreground="{StaticResource TextSecondary}" 
                               FontSize="14" FontWeight="Medium"/>

                    <!-- الرسم البياني -->
                    <Grid Grid.Row="1" VerticalAlignment="Bottom" Margin="10,20,10,10">
                        <!-- خطوط الشبكة الخلفية -->
                        <Border BorderBrush="#33FFFFFF" BorderThickness="0,0,0,1" VerticalAlignment="Bottom" Margin="0,0,0,0"/>
                        <Border BorderBrush="#33FFFFFF" BorderThickness="0,0,0,1" VerticalAlignment="Bottom" Margin="0,0,0,50"/>
                        <Border BorderBrush="#33FFFFFF" BorderThickness="0,0,0,1" VerticalAlignment="Bottom" Margin="0,0,0,100"/>

                        <Polyline Points="0,100 80,80 160,90 240,50 320,60 400,20 480,40" 
                                  Stroke="{StaticResource AccentColor}" 
                                  StrokeThickness="3" 
                                  VerticalAlignment="Bottom" 
                                  Stretch="Fill"/>
                    </Grid>
                </Grid>
            </Border>

            <!-- البطاقة الثانية: توزيع أنواع الملفات -->
            <Border Grid.Column="1" 
                    Background="{StaticResource PanelBackground}" 
                    BorderBrush="{StaticResource BorderColor}" 
                    BorderThickness="1" 
                    CornerRadius="4" 
                    Margin="10,5,5,5">

                <Grid Margin="15">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="توزيع أنواع الملفات" 
                               Foreground="{StaticResource TextSecondary}" 
                               FontSize="14" FontWeight="Medium"/>

                    <!-- المخطط الدائري (Pie Chart Mockup) -->
                    <Grid Grid.Row="1" Width="120" Height="120" VerticalAlignment="Center">
                        <!-- الجزء الأول (الأزرق) -->
                        <Path Data="M 60,60 L 60,0 A 60,60 0 0 1 120,60 Z" Fill="{StaticResource AccentColor}"/>
                        <!-- الجزء الثاني (أزرق فاتح/رمادي) -->
                        <Path Data="M 60,60 L 120,60 A 60,60 0 0 1 60,120 Z" Fill="#505050"/>
                        <!-- الجزء الثالث (أخضر) -->
                        <Path Data="M 60,60 L 60,120 A 60,60 0 1 1 60,0 Z" Fill="#00E676"/>
                    </Grid>

                    <!-- مفتاح الرسم (Legend) -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                        <StackPanel Orientation="Horizontal" Margin="5,0">
                            <Rectangle Width="10" Height="10" Fill="#00E676" RadiusX="2" RadiusY="2"/>
                            <TextBlock Text="PDF" Foreground="{StaticResource TextSecondary}" Margin="5,0,0,0" FontSize="11"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="5,0">
                            <Rectangle Width="10" Height="10" Fill="{StaticResource AccentColor}" RadiusX="2" RadiusY="2"/>
                            <TextBlock Text="DOCX" Foreground="{StaticResource TextSecondary}" Margin="5,0,0,0" FontSize="11"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>

        <!-- قسم آخر النشاطات -->
        <Border Grid.Row="3" 
                Background="{StaticResource PanelBackground}" 
                BorderBrush="{StaticResource BorderColor}" 
                BorderThickness="1" 
                CornerRadius="4" 
                Margin="5,10,5,5" 
                Padding="15">

            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <materialDesign:PackIcon Kind="History" Foreground="{StaticResource TextSecondary}" VerticalAlignment="Center"/>
                    <TextBlock Text="سجل النشاطات الأخير" Foreground="{StaticResource TextPrimary}" FontWeight="SemiBold" Margin="8,0,0,0"/>
                </StackPanel>

                <Separator Background="{StaticResource BorderColor}" Margin="0,0,0,10"/>

                <TextBlock Margin="0,5">
                    <Run Text="[20:25]" Foreground="{StaticResource TextSecondary}"/>
                    <Run Text=" قام " Foreground="{StaticResource TextPrimary}"/>
                    <Run Text="'user_admin'" Foreground="{StaticResource AccentColor}"/>
                    <Run Text=" بتشفير ملف " Foreground="{StaticResource TextPrimary}"/>
                    <Run Text="'report.pdf'" Foreground="{StaticResource TextPrimary}" FontWeight="Bold"/>
                </TextBlock>

                <TextBlock Margin="0,5">
                    <Run Text="[20:10]" Foreground="{StaticResource TextSecondary}"/>
                    <Run Text=" تسجيل دخول جديد من " Foreground="{StaticResource TextPrimary}"/>
                    <Run Text="'john_doe'" Foreground="{StaticResource AccentColor}"/>
                </TextBlock>

                <TextBlock Margin="0,5">
                    <Run Text="[19:55]" Foreground="{StaticResource TextSecondary}"/>
                    <Run Text=" تم تحديث سياسة الأمان بنجاح." Foreground="#00E676"/>
                </TextBlock>
            </StackPanel>
        </Border>

    </Grid>
</UserControl>