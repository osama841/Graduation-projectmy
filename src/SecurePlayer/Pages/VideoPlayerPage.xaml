<Page x:Class="SecurePlayer.Pages.VideoPlayerPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="#0D0E1A">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Enhanced Header -->
        <Grid Grid.Row="0" Margin="0,0,0,30">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" FlowDirection="RightToLeft">
                <Border CornerRadius="12" Padding="14,10" Margin="0,0,18,0">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#1F2139" Offset="0"/>
                            <GradientStop Color="#252840" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Effect>
                        <DropShadowEffect Color="#6366F1" BlurRadius="12" ShadowDepth="0" Opacity="0.4"/>
                    </Border.Effect>
                    <TextBlock Text="🎬" FontSize="22" Foreground="#6366F1"/>
                </Border>
                <StackPanel VerticalAlignment="Center">
                    <TextBlock Text="مشغل الفيديو الآمن" FontSize="28" FontWeight="Bold" Foreground="White" Margin="0,0,0,3">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="#6366F1" BlurRadius="10" ShadowDepth="0" Opacity="0.3"/>
                        </TextBlock.Effect>
                    </TextBlock>
                    <TextBlock Text="تشغيل الفيديوهات المشفرة بأمان عالي" FontSize="13" Foreground="#A1A8B8" FontWeight="Light"/>
                </StackPanel>
            </StackPanel>

            <!-- Open File Button -->
            <Button x:Name="OpenFileBtn" Click="OpenFile_Click" HorizontalAlignment="Left" VerticalAlignment="Center">
                <Button.RenderTransform>
                    <ScaleTransform x:Name="OpenBtnScale" ScaleX="1" ScaleY="1"/>
                </Button.RenderTransform>
                <Button.Effect>
                    <DropShadowEffect Color="#6366F1" BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                </Button.Effect>
                <Button.Content>
                    <StackPanel Orientation="Horizontal" FlowDirection="RightToLeft">
                        <TextBlock Text="📂" FontSize="16" Margin="0,0,8,0" VerticalAlignment="Center"/>
                        <TextBlock Text="فتح فيديو" FontSize="14" FontWeight="SemiBold" VerticalAlignment="Center" Margin="8,0,0,0"/>
                    </StackPanel>
                </Button.Content>
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#5E60CE"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="Padding" Value="18,12"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                           CornerRadius="10" 
                                           Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#7C7DF2" Offset="0"/>
                                            <GradientStop Color="#9B7DF7" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#6366F1" BlurRadius="18" ShadowDepth="0" Opacity="0.8"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
                <Button.Triggers>
                    <EventTrigger RoutedEvent="Button.MouseEnter">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="OpenBtnScale"
                                               Storyboard.TargetProperty="ScaleX"
                                               To="1.05" 
                                               Duration="0:0:0.15"/>
                                <DoubleAnimation Storyboard.TargetName="OpenBtnScale"
                                               Storyboard.TargetProperty="ScaleY"
                                               To="1.05" 
                                               Duration="0:0:0.15"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                    <EventTrigger RoutedEvent="Button.MouseLeave">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="OpenBtnScale"
                                               Storyboard.TargetProperty="ScaleX"
                                               To="1" 
                                               Duration="0:0:0.15"/>
                                <DoubleAnimation Storyboard.TargetName="OpenBtnScale"
                                               Storyboard.TargetProperty="ScaleY"
                                               To="1" 
                                               Duration="0:0:0.15"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Button.Triggers>
            </Button>
        </Grid>

        <!-- Player Section -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="300"/>
            </Grid.ColumnDefinitions>

            <!-- Enhanced Video Player Panel -->
            <Border Grid.Column="0" CornerRadius="24" Margin="0,0,25,0" Padding="30">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#1A1C32" Offset="0"/>
                        <GradientStop Color="#1F2139" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Border.Effect>
                    <DropShadowEffect Color="#000000" BlurRadius="25" ShadowDepth="0" Opacity="0.4"/>
                </Border.Effect>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="130"/>
                    </Grid.RowDefinitions>

                    <!-- Video Display Area -->
                    <Border Grid.Row="0" Background="Black" CornerRadius="18" Margin="0,0,0,25">
                        <Border.Effect>
                            <DropShadowEffect Color="Black" BlurRadius="15" ShadowDepth="2" Opacity="0.5"/>
                        </Border.Effect>
                        <Grid>
                            <MediaElement x:Name="VideoPlayer" 
                                         LoadedBehavior="Manual" 
                                         Stretch="Uniform"
                                         MediaEnded="VideoPlayer_MediaEnded"
                                         MediaOpened="VideoPlayer_MediaOpened"/>

                            <!-- Watermark Overlay -->
                            <Grid Background="#10000000">
                                <TextBlock Text="👤 معرف المستخدم: 12345" 
                                          Foreground="White" 
                                          Opacity="0.4" 
                                          FontSize="16" 
                                          VerticalAlignment="Top" 
                                          HorizontalAlignment="Right" 
                                          Margin="25,20"/>
                            </Grid>

                            <!-- No Video Message -->
                            <StackPanel x:Name="NoVideoPanel" 
                                       VerticalAlignment="Center" 
                                       HorizontalAlignment="Center"
                                       Visibility="Visible">
                                <Border Background="#1E2032" CornerRadius="20" Padding="40,35" Margin="0,0,0,25">
                                    <StackPanel>
                                        <TextBlock Text="📹" FontSize="72" Foreground="#5E60CE" HorizontalAlignment="Center" Margin="0,0,0,20">
                                            <TextBlock.Effect>
                                                <DropShadowEffect Color="#5E60CE" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
                                            </TextBlock.Effect>
                                        </TextBlock>
                                        <TextBlock Text="لا يوجد فيديو" 
                                                  FontSize="20" 
                                                  FontWeight="SemiBold"
                                                  Foreground="White" 
                                                  HorizontalAlignment="Center"
                                                  Margin="0,0,0,8"/>
                                        <TextBlock Text="اضغط 'فتح فيديو' للبدء" 
                                                  FontSize="14" 
                                                  Foreground="#8B8B9A" 
                                                  HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Controls Panel -->
                    <Grid Grid.Row="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Progress Slider -->
                        <Border Grid.Row="0" Background="#2A2D45" CornerRadius="3" Height="6" Margin="0,0,0,25">
                            <Slider x:Name="ProgressSlider" 
                                   Value="0" 
                                   Maximum="100" 
                                   Height="6" 
                                   Background="Transparent"
                                   Foreground="#5E60CE"
                                   BorderThickness="0"
                                   PreviewMouseDown="ProgressSlider_PreviewMouseDown"
                                   PreviewMouseUp="ProgressSlider_PreviewMouseUp">
                                <Slider.Style>
                                    <Style TargetType="Slider">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Slider">
                                                    <Grid>
                                                        <Track x:Name="PART_Track" Grid.Row="0">
                                                            <Track.Thumb>
                                                                <Thumb Style="{StaticResource {x:Type Thumb}}">
                                                                    <Thumb.Template>
                                                                        <ControlTemplate TargetType="Thumb">
                                                                            <Ellipse Width="14" Height="14" Fill="#5E60CE" Stroke="White" StrokeThickness="2"/>
                                                                        </ControlTemplate>
                                                                    </Thumb.Template>
                                                                </Thumb>
                                                            </Track.Thumb>
                                                        </Track>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Slider.Style>
                            </Slider>
                        </Border>

                        <!-- Control Buttons -->
                        <Grid Grid.Row="1">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <!-- Previous Button -->
                                <Button Width="50" Height="50" 
                                       Background="Transparent" 
                                       BorderThickness="0" 
                                       Cursor="Hand" 
                                       Margin="0,0,20,0">
                                    <TextBlock Text="⏮" FontSize="24" Foreground="White"/>
                                </Button>

                                <!-- Play/Pause Button -->
                                <Button x:Name="PlayPauseButton" 
                                       Width="72" Height="72" 
                                       Background="White" 
                                       BorderThickness="0" 
                                       Cursor="Hand"
                                       Margin="0,0,20,0"
                                       Click="PlayPause_Click">
                                    <Button.RenderTransform>
                                        <ScaleTransform x:Name="PlayBtnScale" ScaleX="1" ScaleY="1"/>
                                    </Button.RenderTransform>
                                    <Button.Effect>
                                        <DropShadowEffect x:Name="PlayBtnShadow" Color="Black" BlurRadius="15" ShadowDepth="3" Opacity="0.4"/>
                                    </Button.Effect>
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="36">
                                                <TextBlock x:Name="PlayPauseIcon" 
                                                          Text="▶" 
                                                          FontSize="30" 
                                                          Foreground="#151725"
                                                          FontWeight="Bold"
                                                          HorizontalAlignment="Center"
                                                          VerticalAlignment="Center"
                                                          Margin="4,0,0,0"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                    <Button.Style>
                                        <Style TargetType="Button"/>
                                    </Button.Style>
                                    <Button.Triggers>
                                        <EventTrigger RoutedEvent="Button.MouseEnter">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <ColorAnimation Storyboard.TargetName="PlayBtnShadow"
                                                                  Storyboard.TargetProperty="Color"
                                                                  To="#5E60CE" 
                                                                  Duration="0:0:0.2"/>
                                                    <DoubleAnimation Storyboard.TargetName="PlayBtnShadow"
                                                                   Storyboard.TargetProperty="BlurRadius"
                                                                   To="25" 
                                                                   Duration="0:0:0.2"/>
                                                    <DoubleAnimation Storyboard.TargetName="PlayBtnShadow"
                                                                   Storyboard.TargetProperty="Opacity"
                                                                   To="0.7" 
                                                                   Duration="0:0:0.2"/>
                                                    <DoubleAnimation Storyboard.TargetName="PlayBtnScale"
                                                                   Storyboard.TargetProperty="ScaleX"
                                                                   To="1.1" 
                                                                   Duration="0:0:0.2"/>
                                                    <DoubleAnimation Storyboard.TargetName="PlayBtnScale"
                                                                   Storyboard.TargetProperty="ScaleY"
                                                                   To="1.1" 
                                                                   Duration="0:0:0.2"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                        <EventTrigger RoutedEvent="Button.MouseLeave">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <ColorAnimation Storyboard.TargetName="PlayBtnShadow"
                                                                  Storyboard.TargetProperty="Color"
                                                                  To="Black" 
                                                                  Duration="0:0:0.2"/>
                                                    <DoubleAnimation Storyboard.TargetName="PlayBtnShadow"
                                                                   Storyboard.TargetProperty="BlurRadius"
                                                                   To="15" 
                                                                   Duration="0:0:0.2"/>
                                                    <DoubleAnimation Storyboard.TargetName="PlayBtnShadow"
                                                                   Storyboard.TargetProperty="Opacity"
                                                                   To="0.4" 
                                                                   Duration="0:0:0.2"/>
                                                    <DoubleAnimation Storyboard.TargetName="PlayBtnScale"
                                                                   Storyboard.TargetProperty="ScaleX"
                                                                   To="1" 
                                                                   Duration="0:0:0.2"/>
                                                    <DoubleAnimation Storyboard.TargetName="PlayBtnScale"
                                                                   Storyboard.TargetProperty="ScaleY"
                                                                   To="1" 
                                                                   Duration="0:0:0.2"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </Button.Triggers>
                                </Button>

                                <!-- Next Button -->
                                <Button Width="50" Height="50" 
                                       Background="Transparent" 
                                       BorderThickness="0" 
                                       Cursor="Hand">
                                    <TextBlock Text="⏭" FontSize="24" Foreground="White"/>
                                </Button>
                            </StackPanel>

                            <!-- Time Display -->
                            <StackPanel Orientation="Horizontal" 
                                       HorizontalAlignment="Right" 
                                       VerticalAlignment="Center"
                                       Margin="0,0,20,0">
                                <TextBlock x:Name="CurrentTimeText" Text="00:00" Foreground="Gray" FontSize="14"/>
                                <TextBlock Text=" / " Foreground="Gray" FontSize="14"/>
                                <TextBlock x:Name="TotalTimeText" Text="00:00" Foreground="Gray" FontSize="14"/>
                            </StackPanel>

                            <!-- Volume Control -->
                            <StackPanel Orientation="Horizontal" 
                                       HorizontalAlignment="Left" 
                                       VerticalAlignment="Center"
                                       Margin="20,0,0,0">
                                <TextBlock Text="🔊" FontSize="20" Foreground="White" Margin="0,0,10,0"/>
                                <Slider x:Name="VolumeSlider" 
                                       Width="80" 
                                       Value="50" 
                                       Maximum="100"
                                       ValueChanged="VolumeSlider_ValueChanged"/>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </Grid>
            </Border>

            <!-- Enhanced Right Settings Panel -->
            <Border Grid.Column="1" CornerRadius="24" Padding="28">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#1A1C32" Offset="0"/>
                        <GradientStop Color="#1F2139" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Border.Effect>
                    <DropShadowEffect Color="#000000" BlurRadius="25" ShadowDepth="0" Opacity="0.4"/>
                </Border.Effect>
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel FlowDirection="RightToLeft">
                        <!-- Title -->
                        <Border Background="#252738" CornerRadius="12" Padding="15,12" Margin="0,0,0,25">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ℹ️" FontSize="18" Margin="0,0,12,0" VerticalAlignment="Center"/>
                                <TextBlock Text="معلومات الفيديو" 
                                          Foreground="White" 
                                          FontWeight="Bold" 
                                          FontSize="16" 
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>

                        <!-- File Name -->
                        <TextBlock Text="اسم الملف" Foreground="#8B8B9A" FontSize="11" FontWeight="SemiBold" Margin="0,0,0,8"/>
                        <Border Background="#252738" CornerRadius="10" Padding="15,12" Margin="0,0,0,25">
                            <TextBlock x:Name="FileNameText" 
                                      Text="لم يتم تحميل ملف" 
                                      Foreground="White" 
                                      FontSize="13" 
                                      TextWrapping="Wrap"
                                      LineHeight="20"/>
                        </Border>

                        <!-- Settings Options -->
                        <Border Background="#252738" CornerRadius="12" Padding="15,12" Margin="0,0,0,20">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="⚙️" FontSize="16" Margin="0,0,12,0" VerticalAlignment="Center"/>
                                <TextBlock Text="الإعدادات" 
                                          Foreground="White" 
                                          FontWeight="SemiBold" 
                                          FontSize="14" 
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>

                        <Border Background="#252738" CornerRadius="10" Padding="15,12" Margin="0,0,0,12">
                            <Grid>
                                <TextBlock Text="تشغيل تلقائي" Foreground="#EAEAEA" VerticalAlignment="Center" FontSize="13"/>
                                <CheckBox HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <CheckBox.Style>
                                        <Style TargetType="CheckBox">
                                            <Setter Property="Foreground" Value="#5E60CE"/>
                                        </Style>
                                    </CheckBox.Style>
                                </CheckBox>
                            </Grid>
                        </Border>

                        <Border Background="#252738" CornerRadius="10" Padding="15,12" Margin="0,0,0,25">
                            <Grid>
                                <TextBlock Text="تكرار الفيديو" Foreground="#EAEAEA" VerticalAlignment="Center" FontSize="13"/>
                                <CheckBox x:Name="LoopCheckBox" HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <CheckBox.Style>
                                        <Style TargetType="CheckBox">
                                            <Setter Property="Foreground" Value="#5E60CE"/>
                                        </Style>
                                    </CheckBox.Style>
                                </CheckBox>
                            </Grid>
                        </Border>

                        <!-- Recent Files -->
                        <TextBlock Text="الملفات الأخيرة" 
                                  Foreground="White" 
                                  FontWeight="SemiBold" 
                                  FontSize="14" 
                                  Margin="0,0,0,15"/>

                        <Border Background="#252738" CornerRadius="10" Padding="15,12" Margin="0,0,0,10" Cursor="Hand">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#2A2D45"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="📹 video_sample.mp4" Foreground="#EAEAEA" FontSize="13"/>
                        </Border>
                        <Border Background="#252738" CornerRadius="10" Padding="15,12" Margin="0,0,0,10" Cursor="Hand">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#2A2D45"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="📹 tutorial.mp4" Foreground="#EAEAEA" FontSize="13"/>
                        </Border>
                        <Border Background="#252738" CornerRadius="10" Padding="15,12" Margin="0,0,0,0" Cursor="Hand">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#2A2D45"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="📹 lecture_01.mp4" Foreground="#EAEAEA" FontSize="13"/>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </Grid>
</Page>
